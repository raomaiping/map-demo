import{at as t,i as e,a as i,m as a,o as s,c as r,_ as n}from"../../assets/app.2DJL4jsJ.js";import{A as o}from"../index/index.sBZz26mU.js";var h,d;function p(t){return"oninput"in t?"input":"change"}function l(){h=this._map.dragging.enabled(),d=this._map.tap&&this._map.tap.enabled(),this._map.dragging.disable(),this._map.tap&&this._map.tap.disable()}function y(t){this._refocusOnMap(t),h&&this._map.dragging.enable(),d&&this._map.tap.enable()}function _(t){return"undefined"===t?[]:Array.isArray(t)?t:[t]}t.Control.SideBySide=t.Control.extend({options:{thumbSize:42,padding:0},initialize:function(e,i,a){this.setLeftLayers(e),this.setRightLayers(i),t.setOptions(this,a)},getPosition:function(){var t=this._range.value,e=(.5-t)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().x*t+e},setPosition:function(){},includes:t.Evented.prototype||t.Mixin.Events,addTo:function(e){this.remove(),this._map=e;var i=this._container=t.DomUtil.create("div","leaflet-sbs",e._controlContainer);this._divider=t.DomUtil.create("div","leaflet-sbs-divider",i);var a=this._range=t.DomUtil.create("input","leaflet-sbs-range",i);return a.type="range",a.min=0,a.max=1,a.step="any",a.value=.5,a.style.paddingLeft=a.style.paddingRight=this.options.padding+"px",this._addEvents(),this._updateLayers(),this},remove:function(){return this._map?(this._leftLayer&&(this._leftLayer.getContainer().style.clip=""),this._rightLayer&&(this._rightLayer.getContainer().style.clip=""),this._removeEvents(),t.DomUtil.remove(this._container),this._map=null,this):this},setLeftLayers:function(t){return this._leftLayers=_(t),this._updateLayers(),this},setRightLayers:function(t){return this._rightLayers=_(t),this._updateLayers(),this},_updateClip:function(){var t=this._map,e=t.containerPointToLayerPoint([0,0]),i=t.containerPointToLayerPoint(t.getSize()),a=e.x+this.getPosition(),s=this.getPosition();this._divider.style.left=s+"px",this.fire("dividermove",{x:s});var r="rect("+[e.y,a,i.y,e.x].join("px,")+"px)",n="rect("+[e.y,i.x,i.y,a].join("px,")+"px)";this._leftLayer&&(this._leftLayer.getContainer().style.clip=r),this._rightLayer&&(this._rightLayer.getContainer().style.clip=n)},_updateLayers:function(){if(!this._map)return this;var t=this._leftLayer,e=this._rightLayer;this._leftLayer=this._rightLayer=null,this._leftLayers.forEach((function(t){this._map.hasLayer(t)&&(this._leftLayer=t)}),this),this._rightLayers.forEach((function(t){this._map.hasLayer(t)&&(this._rightLayer=t)}),this),t!==this._leftLayer&&(t&&this.fire("leftlayerremove",{layer:t}),this._leftLayer&&this.fire("leftlayeradd",{layer:this._leftLayer})),e!==this._rightLayer&&(e&&this.fire("rightlayerremove",{layer:e}),this._rightLayer&&this.fire("rightlayeradd",{layer:this._rightLayer})),this._updateClip()},_addEvents:function(){var e=this._range,i=this._map;i&&e&&(i.on("move",this._updateClip,this),i.on("layeradd layerremove",this._updateLayers,this),t.DomEvent.on(e,p(e),this._updateClip,this),t.DomEvent.on(e,"touchstart",l,this),t.DomEvent.on(e,"touchend",y,this),t.DomEvent.on(e,"mousedown",l,this),t.DomEvent.on(e,"mouseup",y,this))},_removeEvents:function(){var e=this._range,i=this._map;e&&(t.DomEvent.off(e,p(e),this._updateClip,this),t.DomEvent.off(e,"touchstart",l,this),t.DomEvent.off(e,"touchend",y,this),t.DomEvent.off(e,"mousedown",l,this),t.DomEvent.off(e,"mouseup",y,this)),i&&(i.off("layeradd layerremove",this._updateLayers,this),i.off("move",this._updateClip,this))}}),t.control.sideBySide=function(e,i,a){return new t.Control.SideBySide(e,i,a)};const u={id:"map"},f=n(e({__name:"index",setup(e){let n=null;return i((()=>{(()=>{n=t.map("map",{preferCanvas:!0,crs:t.CRS.EPSG3857,center:[22.548857,114.064839],zoom:10});const e=t.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:o}).addTo(n),i=t.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:o}).addTo(n);t.control.sideBySide(e,i).addTo(n)})()})),a((()=>{n&&(n.remove(),n=null)})),(t,e)=>(s(),r("div",u))}}),[["__scopeId","data-v-b3ac9a78"]]);export{f as default};
