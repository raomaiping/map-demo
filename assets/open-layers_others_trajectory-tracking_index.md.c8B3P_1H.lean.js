import{i as s,j as i,a,aj as n,z as h,A as k,S as l,l as t,aa as p,a7 as E,F as e,k as r,V as d,m as y,n as g,o as F,c as o,f as c,g as C,p as B,w as A,ak as u,M as D,T as m,X as q,t as w,G as f,I as x,a6 as P,al as v,am as S,a9 as M,_ as T,h as V}from"./app.2DJL4jsJ.js";import{A as b,M as j}from"../js/index/index.sBZz26mU.js";const G={id:"map"},L={class:"setting"},_=T(s({__name:"index",setup(s){const T=i({speed:100,isPlay:!1});let V,_,I,U,Z,N,R=0,z=[],O=0;const X=()=>{T.isPlay?(T.isPlay=!1,N.setGeometry(U),Z.un("postrender",W),N.setStyle(new l({text:new E({text:"->",rotation:O,font:"normal 20px 微软雅黑",fill:new e({color:"red"})})})),null==V||V.render()):(T.isPlay=!0,_=Date.now(),Z.on("postrender",W),N.setGeometry(void 0))};function W(s){const i=Number(T.speed),a=s.frameState.time;R=(R+i*(a-_)/1e6)%2,_=a;const n=I.getCoordinateAt(R>1?2-R:R);U.setCoordinates(n);const h=M(s);z.length&&(O=Math.atan2(0,1)-Math.atan2(n[1]-z[1],n[0]-z[0])),h.setStyle(new l({text:new E({text:"->",rotation:O,font:"normal 20px 微软雅黑",fill:new e({color:"red"})})})),h.drawGeometry(U),z=n,null==V||V.render()}return a((()=>{V=new D({target:"map",layers:[new m({source:new q({attributions:b,url:j,maxZoom:20})})],view:new w({projection:"EPSG:3857",center:[-5639523.95,-3501274.52],zoom:9,minZoom:2,maxZoom:19}),controls:f().extend([new x])}),fetch("/json/route.json").then((s=>{s.json().then((s=>{var i;const a=s.routes[0].geometry;I=new n({factor:1e6}).readGeometry(a,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});const y=new h({type:"route",geometry:I}),g=new h({type:"icon",geometry:new k(I.getFirstCoordinate())}),F=new h({type:"icon",geometry:new k(I.getLastCoordinate())}),o=null==(i=null==g?void 0:g.getGeometry())?void 0:i.clone();if(o){U=o;const s=new h({type:"geoMarker",geometry:U});N=new h({geometry:U,type:"text"});let i=U.getFirstCoordinate();const a={route:new l({stroke:new t({width:6,color:[237,212,0,.8]})}),icon:new l({image:new p({anchor:[.5,1],src:"/image/icon.png"})}),text:new l({text:new E({text:"->",rotation:Math.atan2(i[0]-i[1],i[1]-i[0]),font:"normal 20px 微软雅黑",fill:new e({color:"red"})})})};Z=new r({source:new d({features:[y,s,g,F,N]}),style:function(s){return a[s.get("type")]}}),null==V||V.addLayer(Z)}}))}))})),y((()=>{V&&(V.dispose(),V=null)})),(s,i)=>{const a=g("el-slider"),n=g("el-button");return F(),o("div",G,[c("div",L,[C(" 滑动控制速度: "),B(a,{modelValue:T.speed,"onUpdate:modelValue":i[0]||(i[0]=s=>T.speed=s),class:"slider",min:10,max:999},null,8,["modelValue"]),B(n,{type:"primary",icon:T.isPlay?u(S):u(v),onClick:X},{default:A((()=>[C(P(T.isPlay?"关闭":"开启"),1)])),_:1},8,["icon"])])])}}}),[["__scopeId","data-v-993eaa6f"]]),I=c("h1",{id:"轨迹跟踪",tabindex:"-1"},[C("轨迹跟踪 "),c("a",{class:"header-anchor",href:"#轨迹跟踪","aria-label":'Permalink to "轨迹跟踪"'},"​")],-1),U=c("div",{class:"tip custom-block"},[c("p",{class:"custom-block-title"},"TIP"),c("p",null,"滑动滑块可改变箭头运动速度，点击按钮可控制开启或关闭。")],-1),Z=V("",2),N=JSON.parse('{"title":"轨迹跟踪","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/others/trajectory-tracking/index.md","filePath":"open-layers/others/trajectory-tracking/index.md","lastUpdated":1704792985000}'),R={name:"open-layers/others/trajectory-tracking/index.md"},z=Object.assign(R,{setup:s=>(s,i)=>(F(),o("div",null,[I,U,B(_),Z]))});export{N as __pageData,z as default};
