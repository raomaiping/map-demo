import{A as s,M as i}from"../js/index/index.sBZz26mU.js";import{i as a,T as n,X as h,a as k,m as l,n as p,o as t,c as E,f as e,p as r,w as d,q as y,M as g,t as F,g as o,v as c,x as C,_ as m,h as A}from"./app.2DJL4jsJ.js";const D={id:"menu"},B=(s=>(c("data-v-eb753ee6"),s=s(),C(),s))((()=>e("div",{id:"map"},null,-1))),u=m(a({__name:"index",setup(a){let c=null;const C=new n({source:new h({attributions:s,url:i,maxZoom:20,crossOrigin:"anonymous"})}),m=()=>{((s,i="map.png")=>{null!==s&&(s.once("rendercomplete",(function(){const a=document.createElement("canvas"),n=s.getSize()||[];a.width=n[0],a.height=n[1];const h=a.getContext("2d");if(null!==h)if(Array.prototype.forEach.call(s.getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer"),(s=>{if(s.width>0&&null!==s.parentElement){const i=s.parentElement.style.opacity||s.style.opacity;h.globalAlpha=""===i?1:Number(i);const a=s.parentElement.style.backgroundColor;let n;a&&(h.fillStyle=a,h.fillRect(0,0,s.width,s.height));const k=s.style.transform;n=k?k.match(/^matrix\(([^(]*)\)$/)[1].split(",").map(Number):[parseFloat(s.style.width)/s.width,0,0,parseFloat(s.style.height)/s.height,0,0],CanvasRenderingContext2D.prototype.setTransform.apply(h,n),h.drawImage(s,0,0)}})),h.globalAlpha=1,navigator.msSaveBlob)navigator.msSaveBlob(a.msToBlob(),i);else{const s=document.createElement("a");s.href=a.toDataURL(),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}})),s.renderSync())})(c,"地图打印")};return k((()=>{c=new g({target:"map",layers:[C],view:new F({projection:"EPSG:4326",center:[0,0],zoom:5})})})),l((()=>{c&&(c.dispose(),c=null)})),(s,i)=>{const a=p("el-button");return t(),E(y,null,[e("div",D,[r(a,{type:"primary",onClick:m},{default:d((()=>[o("导出地图")])),_:1})]),B],64)}}}),[["__scopeId","data-v-eb753ee6"]]),v=e("h1",{id:"地图打印",tabindex:"-1"},[o("地图打印 "),e("a",{class:"header-anchor",href:"#地图打印","aria-label":'Permalink to "地图打印"'},"​")],-1),f=e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"TIP"),e("p",null,"点击按钮打印地图。")],-1),q=A("",4),b=JSON.parse('{"title":"地图打印","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/third-party-map-display/map-export/index.md","filePath":"open-layers/third-party-map-display/map-export/index.md","lastUpdated":1704792985000}'),x={name:"open-layers/third-party-map-display/map-export/index.md"},w=Object.assign(x,{setup:s=>(s,i)=>(t(),E("div",null,[v,f,r(u),q]))});export{b as __pageData,w as default};
